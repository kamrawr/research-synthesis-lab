<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rental Upgrade and Property Turnover Initiative | Research Synthesis Lab</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css">
    <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
    <style>
        :root {
            --primary: #0d9488;
            --secondary: #f59e0b;
            --accent: #8b5cf6;
            --success: #10b981;
        }
        
        body {
            padding: 0;
            margin: 0;
        }
        
        .hero {
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            color: white;
            padding: 3rem 0;
            margin-bottom: 2rem;
        }
        
        .hero h1 {
            color: white;
            margin-bottom: 0.5rem;
        }
        
        .hero p {
            opacity: 0.95;
            font-size: 1.1rem;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }
        
        .stat-card {
            background: var(--card-background-color);
            padding: 1.5rem;
            border-radius: 8px;
            border: 1px solid var(--muted-border-color);
            text-align: center;
        }
        
        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--primary);
            display: block;
        }
        
        .stat-label {
            color: var(--muted-color);
            font-size: 0.9rem;
            margin-top: 0.5rem;
        }
        
        .highlight-stat {
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            color: white;
            border: none;
        }
        
        .highlight-stat .stat-number {
            color: white;
        }
        
        .highlight-stat .stat-label {
            color: rgba(255,255,255,0.9);
        }
        
        .nav-tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 2rem;
            border-bottom: 2px solid var(--muted-border-color);
            flex-wrap: wrap;
        }
        
        .nav-tab {
            padding: 1rem 1.5rem;
            background: none;
            border: none;
            border-bottom: 3px solid transparent;
            cursor: pointer;
            font-weight: 600;
            color: var(--muted-color);
            transition: all 0.3s;
        }
        
        .nav-tab:hover {
            color: var(--primary);
        }
        
        .nav-tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .back-link {
            display: inline-block;
            margin-bottom: 1rem;
            color: white;
            text-decoration: none;
            opacity: 0.95;
        }
        
        .back-link:hover {
            text-decoration: underline;
            opacity: 1;
        }
        
        .study-card {
            background: var(--card-background-color);
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 1.5rem;
            border: 1px solid var(--muted-border-color);
            transition: border-color 0.3s;
        }
        
        .study-card:hover {
            border-color: var(--primary);
        }
        
        .study-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--primary);
        }
        
        .study-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin: 0.5rem 0;
            font-size: 0.9rem;
            color: var(--muted-color);
        }
        
        .tag {
            display: inline-block;
            background: var(--primary);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.85rem;
            margin-right: 0.5rem;
            margin-bottom: 0.5rem;
        }
        
        .theme-section {
            background: var(--card-background-color);
            padding: 2rem;
            border-radius: 8px;
            margin: 2rem 0;
            border-left: 4px solid var(--primary);
        }
        
        .theme-title {
            color: var(--primary);
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }
        
        .chart-container {
            margin: 2rem 0;
            padding: 1.5rem;
            background: var(--card-background-color);
            border-radius: 8px;
            border: 1px solid var(--muted-border-color);
        }
        
        .filter-section {
            background: var(--card-background-color);
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 2rem;
            border: 1px solid var(--muted-border-color);
        }
        
        .filter-group {
            margin-bottom: 1rem;
        }
        
        .filter-group label {
            font-weight: 600;
            display: block;
            margin-bottom: 0.5rem;
        }
        
        .design-elements-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }
        
        .design-card {
            background: var(--card-background-color);
            padding: 1.5rem;
            border-radius: 8px;
            border: 1px solid var(--muted-border-color);
        }
        
        .design-card h4 {
            color: var(--accent);
            margin-bottom: 1rem;
        }
        
        .outcome-badge {
            display: inline-block;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            font-weight: 600;
            margin: 0.25rem;
        }
        
        .economic {
            background: #d1fae5;
            color: #065f46;
        }
        
        .environmental {
            background: #dbeafe;
            color: #1e40af;
        }
        
        .both {
            background: #f3e8ff;
            color: #6b21a8;
        }
    </style>
</head>
<body>
    <div class="hero">
        <div class="container">
            <a href="../../index.html" class="back-link">← Back to Research Synthesis Lab</a>
            <h1>Rental Upgrade and Property Turnover Initiative</h1>
            <p>Building community resilience through workforce development and property improvement programs</p>
        </div>
    </div>

    <main class="container">
        <div class="stats-grid">
            <div class="stat-card highlight-stat">
                <span class="stat-number">82%</span>
                <span class="stat-label">Max Emissions Reduction</span>
            </div>
            <div class="stat-card">
                <span class="stat-number">23,000</span>
                <span class="stat-label">Jobs Projected (NC)</span>
            </div>
            <div class="stat-card highlight-stat">
                <span class="stat-number">21</span>
                <span class="stat-label">Studies Analyzed</span>
            </div>
            <div class="stat-card">
                <span class="stat-number">9M</span>
                <span class="stat-label">Potential US Jobs</span>
            </div>
        </div>

        <nav class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('overview')">Overview</button>
            <button class="nav-tab" onclick="showTab('programs')">Program Diagrams</button>
            <button class="nav-tab" onclick="showTab('studies')">Studies</button>
            <button class="nav-tab" onclick="showTab('models')">Implementation Models</button>
            <button class="nav-tab" onclick="showTab('outcomes')">Outcomes</button>
            <button class="nav-tab" onclick="showTab('design')">Design Elements</button>
            <button class="nav-tab" onclick="showTab('visualizations')">Visualizations</button>
        </nav>

        <div id="overview" class="tab-content active">
            <article>
                <h2>Research Question</h2>
                <p>How can community-oriented residential service systems—supported by local workforce development, credentialing frameworks, and cooperative delivery models—be designed to strengthen economic and environmental resilience in underserved or post-industrial regions?</p>

                <h2>Key Finding</h2>
                <div class="theme-section">
                    <p><strong>Strategic partnerships combining workforce development credentialing with residential energy, housing, and care services create documented economic and environmental resilience outcomes</strong>, including job creation, expanded local tax bases, energy efficiency improvements, and emissions reductions of up to 82% in underserved or post-industrial regions.</p>
                </div>

                <h2>Research Scope</h2>
                <ul>
                    <li><strong>138 million</strong> academic papers searched via Elicit (Semantic Scholar + OpenAlex)</li>
                    <li><strong>499 papers</strong> retrieved as most relevant</li>
                    <li><strong>21 studies</strong> included after screening</li>
                    <li>Focus on empirical evidence from underserved, rural, and post-industrial regions</li>
                </ul>

                <h2>Focus Areas</h2>
                <div class="design-elements-grid">
                    <div class="design-card">
                        <h4>Workforce Integration</h4>
                        <p>Credentialing, apprenticeships, and micro-credentials within residential energy, housing, care, and maintenance services</p>
                    </div>
                    <div class="design-card">
                        <h4>Community Partnerships</h4>
                        <p>CBOs, community colleges, and local governments collaborating for sustainable service delivery</p>
                    </div>
                    <div class="design-card">
                        <h4>Economic Resilience</h4>
                        <p>Local job creation, skill mobility, resource circulation, and reduced vulnerability</p>
                    </div>
                    <div class="design-card">
                        <h4>Environmental Resilience</h4>
                        <p>Energy efficiency, retrofits, disaster readiness, and circular repair economies</p>
                    </div>
                    <div class="design-card">
                        <h4>Equity & Inclusion</h4>
                        <p>Workforce pathways for marginalized and low-income groups, including those with criminal records</p>
                    </div>
                    <div class="design-card">
                        <h4>Policy & Governance</h4>
                        <p>Public-private partnerships, green banks, cooperative ownership, state and federal programs</p>
                    </div>
                </div>
            </article>
        </div>

        <div id="programs" class="tab-content">
            <h2>Program Frameworks</h2>
            
            <div class="theme-section">
                <h3 class="theme-title">Rental Turnover Program Cycle</h3>
                <p>A cyclical approach to managing property turnover with integrated workforce development and tenant support.</p>
                <div style="text-align: center; margin: 2rem 0;">
                    <img src="images/rental-turnover-cycle.png" alt="Rental Turnover Program Cycle" style="max-width: 100%; height: auto; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
                </div>
                <h4>Key Components:</h4>
                <ul>
                    <li><strong>Landlord Sign-Up:</strong> Engaging property owners in the program</li>
                    <li><strong>Property Assessment:</strong> Evaluating upgrade needs and opportunities</li>
                    <li><strong>Upgrade Scoping:</strong> Planning improvements and workforce requirements</li>
                    <li><strong>Tenant Support:</strong> Ensuring improved living conditions</li>
                    <li><strong>Contractor Engagement:</strong> Building local workforce capacity</li>
                </ul>
            </div>

            <div class="theme-section">
                <h3 class="theme-title">Building the Program</h3>
                <p>A three-phase approach to establishing a successful rental turnover initiative.</p>
                <div style="text-align: center; margin: 2rem 0;">
                    <img src="images/building-rental-program.png" alt="Building Rental Turnover Program" style="max-width: 100%; height: auto; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
                </div>
                <div class="design-elements-grid">
                    <div class="design-card">
                        <h4 style="color: #3b82f6;">1. Engage Stakeholders</h4>
                        <p>Initiate communication with tenants, landlords, and contractors to gather feedback and recruit participants.</p>
                    </div>
                    <div class="design-card">
                        <h4 style="color: #10b981;">2. Establish Partnerships</h4>
                        <p>Form MOU partnerships and define roles/responsibilities to ensure smooth collaboration.</p>
                    </div>
                    <div class="design-card">
                        <h4 style="color: #84cc16;">3. Design Pathways</h4>
                        <p>Create clear flow pathways for participants and resources to streamline the program.</p>
                    </div>
                </div>
            </div>

            <div class="theme-section">
                <h3 class="theme-title">Comprehensive Property Upgrade Programs</h3>
                <p>Three integrated programs that work together to improve properties and support all stakeholders.</p>
                <div style="text-align: center; margin: 2rem 0;">
                    <img src="images/property-upgrade-programs.png" alt="Comprehensive Property Upgrade Programs" style="max-width: 100%; height: auto; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
                </div>
                <div class="design-elements-grid">
                    <div class="design-card">
                        <h4>Landlord Upgrade Program</h4>
                        <p>Provides resources and support for property enhancement</p>
                        <ul>
                            <li>Technical assistance</li>
                            <li>Financing options</li>
                            <li>Energy efficiency incentives</li>
                        </ul>
                    </div>
                    <div class="design-card">
                        <h4>Tenant Upgrade Program</h4>
                        <p>Ensures improved living conditions and amenities for tenants</p>
                        <ul>
                            <li>Quality of life improvements</li>
                            <li>Energy cost savings</li>
                            <li>Healthier living environments</li>
                        </ul>
                    </div>
                    <div class="design-card">
                        <h4>Maintenance Upgrade Program</h4>
                        <p>Equips contractors with tools and guidelines for effective maintenance</p>
                        <ul>
                            <li>Training and credentialing</li>
                            <li>Best practices</li>
                            <li>Job creation</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <div id="studies" class="tab-content">
            <h2>Study Explorer</h2>
            
            <div class="filter-section">
                <div class="filter-group">
                    <label for="model-filter">Implementation Model:</label>
                    <select id="model-filter" onchange="filterStudies()">
                        <option value="">All Models</option>
                        <option value="collective">Collective Impact</option>
                        <option value="partnership">Partnership/Nonprofit</option>
                        <option value="cooperative">Cooperative</option>
                        <option value="university">University-Community</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label for="outcome-filter">Outcomes Measured:</label>
                    <select id="outcome-filter" onchange="filterStudies()">
                        <option value="">All Outcomes</option>
                        <option value="economic">Economic Only</option>
                        <option value="environmental">Environmental Only</option>
                        <option value="both">Both Economic & Environmental</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label for="search-input">Search Studies:</label>
                    <input type="text" id="search-input" placeholder="Search by title, author, location..." onkeyup="filterStudies()">
                </div>
            </div>

            <div id="studies-container">
                <!-- Studies will be loaded here by JavaScript -->
            </div>
        </div>

        <div id="models" class="tab-content">
            <h2>Implementation Models</h2>
            
            <div class="theme-section">
                <h3 class="theme-title">Community-Based / Cooperative Models</h3>
                <p><strong>Used in 4 studies</strong></p>
                <p>Community Development Corporations, community coalitions, and co-operatives leading service delivery and workforce development.</p>
                <ul>
                    <li>Bottom-up, grassroots approaches</li>
                    <li>Community ownership and leadership</li>
                    <li>Social capital building</li>
                    <li><strong>Example:</strong> Italian community co-operatives in marginal areas creating jobs and resilience</li>
                </ul>
            </div>

            <div class="theme-section">
                <h3 class="theme-title">Nonprofit-Led / Partnership Models</h3>
                <p><strong>Used in 4 studies</strong></p>
                <p>Nonprofits collaborating with community colleges, government agencies, and utilities to deliver integrated services.</p>
                <ul>
                    <li>Strategic partnerships leveraging multiple resources</li>
                    <li>Technical assistance and capacity building</li>
                    <li>Cross-sector coordination</li>
                    <li><strong>Example:</strong> Florida partnership between nonprofit, college, and university for disaster recovery housing</li>
                </ul>
            </div>

            <div class="theme-section">
                <h3 class="theme-title">Collective Impact Models</h3>
                <p><strong>Used in 3 studies (Medicaid-funded)</strong></p>
                <p>Multi-stakeholder initiatives using shared measurement and backbone support to coordinate workforce credentialing.</p>
                <ul>
                    <li>Unified credentialing frameworks</li>
                    <li>Multi-level certification systems</li>
                    <li>Online portals for worker mobility</li>
                    <li><strong>Example:</strong> North Carolina direct care workforce modernization projecting 23,000 jobs</li>
                </ul>
            </div>

            <div class="theme-section">
                <h3 class="theme-title">University-Community Partnerships</h3>
                <p><strong>Used in 2 studies</strong></p>
                <p>Academic institutions providing technical assistance and engineering support for community energy projects.</p>
                <ul>
                    <li>Capstone projects serving real community needs</li>
                    <li>Technical resource provision</li>
                    <li>Student training integrated with service delivery</li>
                    <li><strong>Example:</strong> Washington State solar + storage design for disadvantaged communities</li>
                </ul>
            </div>

            <div class="theme-section">
                <h3 class="theme-title">Public-Private Partnerships</h3>
                <p><strong>Used in 2 studies</strong></p>
                <p>Multi-stakeholder collaborations combining public funding, private sector expertise, and community engagement.</p>
                <ul>
                    <li>Flexible funding mechanisms</li>
                    <li>Policy coordination</li>
                    <li>Resource mobilization at scale</li>
                    <li><strong>Example:</strong> Western US innovations in home energy cost reduction for LMI populations</li>
                </ul>
            </div>
        </div>

        <div id="outcomes" class="tab-content">
            <h2>Resilience Outcomes</h2>
            
            <div class="theme-section">
                <h3 class="theme-title">Economic Resilience</h3>
                <p><strong>Measured in 20 studies</strong></p>
                
                <h4>Job Creation</h4>
                <ul>
                    <li><strong>23,000 jobs projected</strong> - North Carolina direct care workforce (Lane et al., 2023)</li>
                    <li><strong>9 million potential jobs nationwide</strong> - Building retrofit sector analysis (Moe, 2024)</li>
                    <li><strong>900,000 jobs in buildings sector</strong> - National Renewable Energy Laboratory projections</li>
                    <li><strong>200+ job years locally</strong> - Pittsburgh Hill District energy workforce (Moe, 2024)</li>
                </ul>
                
                <h4>Other Economic Indicators</h4>
                <ul>
                    <li>Expanded local tax base (Stagg et al., 2021)</li>
                    <li>Cost savings for residents and communities</li>
                    <li>Wage premiums for credentialed workers</li>
                    <li>Skill mobility and career advancement pathways</li>
                    <li>Property value increases</li>
                    <li>Social capital building in cooperatives</li>
                </ul>
            </div>

            <div class="theme-section">
                <h3 class="theme-title">Environmental Resilience</h3>
                <p><strong>Measured in 10 studies</strong></p>
                
                <h4>Emissions Reductions</h4>
                <ul>
                    <li><strong>52–82% emissions reduction</strong> - Microgrid deployment (Anderson et al., 2022)</li>
                    <li><strong>1.5–2% demand reduction</strong> - Midwest energy efficiency (Anderson et al., 2010)</li>
                    <li>Greenhouse gas reduction aligned with policy goals</li>
                    <li>Carbon reduction from solar + storage installations</li>
                </ul>
                
                <h4>Other Environmental Indicators</h4>
                <ul>
                    <li>Energy Star/Green Home standards certification</li>
                    <li>Retrofit and weatherization outcomes</li>
                    <li>Disaster resilience improvements</li>
                    <li>Climate adaptation measures</li>
                    <li>Health improvements (reduced asthma, better indoor air quality)</li>
                    <li>Circular economy impacts (repair, reuse, waste reduction)</li>
                    <li>Ecosystem regeneration in frontline communities</li>
                </ul>
            </div>

            <div class="theme-section">
                <h3 class="theme-title">Combined Economic & Environmental Outcomes</h3>
                <p><strong>8 studies reported both types of outcomes</strong></p>
                <p>Studies demonstrating both economic and environmental resilience show how workforce development can be a lever for comprehensive community transformation:</p>
                <ul>
                    <li>Job creation alongside energy efficiency improvements</li>
                    <li>Tax base expansion coupled with emissions reductions</li>
                    <li>Skill building integrated with environmental health outcomes</li>
                    <li>Cost savings from both reduced energy bills and improved property values</li>
                </ul>
            </div>
        </div>

        <div id="design" class="tab-content">
            <h2>Key Design Elements for Community Resilience</h2>
            
            <div class="theme-section">
                <h3 class="theme-title">1. Embed Credentialing in Service Delivery</h3>
                <p>Integrate apprenticeships, certifications, and micro-credentials directly into residential energy, housing, and care services to boost skill mobility and workforce engagement.</p>
                
                <h4>Credentialing Frameworks Identified:</h4>
                <ul>
                    <li><strong>NCCER Certification</strong> - Construction and housing sectors</li>
                    <li><strong>Multi-level Care Worker Credentials</strong> - Direct care workforce with online portals</li>
                    <li><strong>Joint Labor-Management Apprenticeships</strong> - Energy efficiency retrofits</li>
                    <li><strong>Micro-credentials</strong> - Green energy transition and renewable sector</li>
                    <li><strong>Community Workforce Agreements</strong> - Ensuring access for disadvantaged groups</li>
                </ul>
                
                <h4>Challenges:</h4>
                <ul>
                    <li>Fragmented or inconsistent requirements</li>
                    <li>Limited portability across regions</li>
                    <li>Insufficient funding for professional development</li>
                    <li>Barriers for individuals with criminal records (addressed by Fair Chance programs)</li>
                </ul>
            </div>

            <div class="theme-section">
                <h3 class="theme-title">2. Form Community Partnerships</h3>
                <p>Leverage public-private collaborations, nonprofit-led models, and Collective Impact frameworks to coordinate funding, technical assistance, and regulatory support.</p>
                
                <h4>Key Partnership Types:</h4>
                <ul>
                    <li><strong>Community College + Nonprofit + University</strong> - Technical training integrated with service</li>
                    <li><strong>Community Coalition + NREL</strong> - Technical assistance for energy workforce planning</li>
                    <li><strong>Collective Impact Backbone</strong> - Multi-stakeholder coordination for workforce credentialing</li>
                    <li><strong>University Capstone + Community</strong> - Engineering students solving real community problems</li>
                    <li><strong>Nonprofit + Government + Utility</strong> - Coordinated retrofit and efficiency programs</li>
                </ul>
                
                <h4>Success Factors:</h4>
                <ul>
                    <li>Diverse partner roles with clear coordination mechanisms</li>
                    <li>Technical assistance and capacity building</li>
                    <li>Shared measurement and data systems</li>
                    <li>Trust building through community engagement</li>
                    <li>Flexible funding mechanisms (CDBG, Medicaid, ARRA, Justice40)</li>
                </ul>
            </div>

            <div class="theme-section">
                <h3 class="theme-title">3. Implement Inclusive Pathways</h3>
                <p>Create programs for marginalized groups including individuals with criminal records, low-income populations, and underserved communities to extend sustainable job opportunities.</p>
                
                <h4>Equity Mechanisms Identified:</h4>
                <ul>
                    <li><strong>Fair Chance Programs</strong> - Removing barriers for individuals with criminal records</li>
                    <li><strong>Justice40 Initiative</strong> - Federal policy directing 40% of benefits to disadvantaged communities</li>
                    <li><strong>Community Workforce Agreements</strong> - Guaranteeing access for targeted populations</li>
                    <li><strong>Listening Sessions</strong> - Community-driven design of workforce programs</li>
                    <li><strong>Cooperative Ownership</strong> - Community control in marginalized rural and urban areas</li>
                    <li><strong>Targeted Outreach</strong> - Door-to-door, peer-to-peer for disaster-affected and LMI populations</li>
                </ul>
                
                <h4>Populations Prioritized:</h4>
                <ul>
                    <li>Individuals with criminal records</li>
                    <li>Low-income and very low-income households</li>
                    <li>Renters in LMI housing</li>
                    <li>Rural and post-industrial communities</li>
                    <li>Disaster-affected residents</li>
                    <li>Frontline communities facing environmental injustice</li>
                    <li>Direct care workers (often women of color, immigrants)</li>
                </ul>
            </div>
        </div>

        <div id="visualizations" class="tab-content">
            <h2>Data Visualizations</h2>
            
            <div class="chart-container">
                <h3>Implementation Models Distribution</h3>
                <div id="models-chart"></div>
            </div>

            <div class="chart-container">
                <h3>Primary Focus Areas</h3>
                <div id="focus-chart"></div>
            </div>

            <div class="chart-container">
                <h3>Outcome Types Measured</h3>
                <div id="outcomes-chart"></div>
            </div>

            <div class="chart-container">
                <h3>Success Factors vs. Barriers</h3>
                <div id="factors-chart"></div>
            </div>
        </div>
    </main>

    <footer style="text-align: center; padding: 2rem; margin-top: 4rem; border-top: 1px solid var(--muted-border-color);">
        <p>Research Synthesis Lab | Rental Upgrade and Property Turnover Initiative</p>
        <p><a href="../../index.html">Back to Hub</a></p>
    </footer>

    <script>
        let studiesData = null;

        // Tab navigation
        function showTab(tabName) {
            const tabs = document.querySelectorAll('.tab-content');
            const navTabs = document.querySelectorAll('.nav-tab');
            
            tabs.forEach(tab => tab.classList.remove('active'));
            navTabs.forEach(tab => tab.classList.remove('active'));
            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        // Load and display studies
        async function loadStudies() {
            try {
                const response = await fetch('data/studies.json');
                studiesData = await response.json();
                displayStudies(studiesData.studies);
                createVisualizations();
            } catch (error) {
                console.error('Error loading studies:', error);
                document.getElementById('studies-container').innerHTML = '<p>Error loading studies data.</p>';
            }
        }

        function displayStudies(studies) {
            const container = document.getElementById('studies-container');
            
            if (studies.length === 0) {
                container.innerHTML = '<p>No studies match your filters.</p>';
                return;
            }
            
            container.innerHTML = studies.map(study => `
                <div class="study-card">
                    <div class="study-title">${study.title}</div>
                    <div class="study-meta">
                        <span><strong>Authors:</strong> ${study.authors.join(', ')}</span>
                        <span><strong>Year:</strong> ${study.year}</span>
                    </div>
                    <p><strong>Context:</strong> ${study.context}</p>
                    <p><strong>Model:</strong> ${study.implementation_model}</p>
                    <p><strong>Focus:</strong> ${study.primary_focus}</p>
                    ${study.credentialing ? `<p><strong>Credentialing:</strong> ${study.credentialing}</p>` : ''}
                    <div style="margin: 1rem 0;">
                        ${study.economic_outcomes ? `<span class="outcome-badge economic">Economic: ${study.economic_outcomes}</span>` : ''}
                        ${study.environmental_outcomes ? `<span class="outcome-badge environmental">Environmental: ${study.environmental_outcomes}</span>` : ''}
                    </div>
                    ${study.equity_mechanisms ? `<p><strong>Equity:</strong> ${study.equity_mechanisms}</p>` : ''}
                    <details>
                        <summary style="cursor: pointer; color: var(--primary); font-weight: 600;">View Success Factors & Barriers</summary>
                        <div style="margin-top: 1rem;">
                            ${study.success_factors && study.success_factors.length > 0 ? `
                                <p><strong>Success Factors:</strong></p>
                                <ul>
                                    ${study.success_factors.map(f => `<li>${f}</li>`).join('')}
                                </ul>
                            ` : ''}
                            ${study.barriers && study.barriers.length > 0 ? `
                                <p><strong>Barriers:</strong></p>
                                <ul>
                                    ${study.barriers.map(b => `<li>${b}</li>`).join('')}
                                </ul>
                            ` : ''}
                        </div>
                    </details>
                </div>
            `).join('');
        }

        function filterStudies() {
            if (!studiesData) return;
            
            const modelFilter = document.getElementById('model-filter').value.toLowerCase();
            const outcomeFilter = document.getElementById('outcome-filter').value.toLowerCase();
            const searchTerm = document.getElementById('search-input').value.toLowerCase();
            
            let filtered = studiesData.studies;
            
            if (modelFilter) {
                filtered = filtered.filter(study => 
                    study.implementation_model.toLowerCase().includes(modelFilter)
                );
            }
            
            if (outcomeFilter) {
                if (outcomeFilter === 'economic') {
                    filtered = filtered.filter(study => 
                        study.economic_outcomes && !study.environmental_outcomes
                    );
                } else if (outcomeFilter === 'environmental') {
                    filtered = filtered.filter(study => 
                        study.environmental_outcomes && !study.economic_outcomes
                    );
                } else if (outcomeFilter === 'both') {
                    filtered = filtered.filter(study => 
                        study.economic_outcomes && study.environmental_outcomes
                    );
                }
            }
            
            if (searchTerm) {
                filtered = filtered.filter(study =>
                    study.title.toLowerCase().includes(searchTerm) ||
                    study.authors.some(author => author.toLowerCase().includes(searchTerm)) ||
                    study.context.toLowerCase().includes(searchTerm) ||
                    study.primary_focus.toLowerCase().includes(searchTerm)
                );
            }
            
            displayStudies(filtered);
        }

        function createVisualizations() {
            createModelsChart();
            createFocusChart();
            createOutcomesChart();
            createFactorsChart();
        }

        function createModelsChart() {
            const data = [
                { model: 'Community-Based', count: 4 },
                { model: 'Nonprofit-Led', count: 4 },
                { model: 'Collective Impact', count: 3 },
                { model: 'University-Community', count: 2 },
                { model: 'Public-Private', count: 2 }
            ];

            const width = 800;
            const height = 400;
            const margin = { top: 20, right: 30, bottom: 80, left: 60 };

            const svg = d3.select('#models-chart')
                .append('svg')
                .attr('width', '100%')
                .attr('height', height)
                .attr('viewBox', `0 0 ${width} ${height}`);

            const x = d3.scaleBand()
                .domain(data.map(d => d.model))
                .range([margin.left, width - margin.right])
                .padding(0.3);

            const y = d3.scaleLinear()
                .domain([0, d3.max(data, d => d.count)])
                .nice()
                .range([height - margin.bottom, margin.top]);

            svg.append('g')
                .attr('transform', `translate(0,${height - margin.bottom})`)
                .call(d3.axisBottom(x))
                .selectAll('text')
                .attr('transform', 'rotate(-45)')
                .style('text-anchor', 'end');

            svg.append('g')
                .attr('transform', `translate(${margin.left},0)`)
                .call(d3.axisLeft(y));

            svg.selectAll('rect')
                .data(data)
                .join('rect')
                .attr('x', d => x(d.model))
                .attr('y', d => y(d.count))
                .attr('width', x.bandwidth())
                .attr('height', d => y(0) - y(d.count))
                .attr('fill', '#0d9488');
        }

        function createFocusChart() {
            const data = [
                { focus: 'Workforce', count: 14 },
                { focus: 'Energy/Retrofits', count: 8 },
                { focus: 'Housing', count: 3 },
                { focus: 'Economic Dev', count: 2 }
            ];

            const width = 800;
            const height = 400;
            const margin = { top: 20, right: 30, bottom: 60, left: 60 };

            const svg = d3.select('#focus-chart')
                .append('svg')
                .attr('width', '100%')
                .attr('height', height)
                .attr('viewBox', `0 0 ${width} ${height}`);

            const x = d3.scaleBand()
                .domain(data.map(d => d.focus))
                .range([margin.left, width - margin.right])
                .padding(0.3);

            const y = d3.scaleLinear()
                .domain([0, d3.max(data, d => d.count)])
                .nice()
                .range([height - margin.bottom, margin.top]);

            svg.append('g')
                .attr('transform', `translate(0,${height - margin.bottom})`)
                .call(d3.axisBottom(x));

            svg.append('g')
                .attr('transform', `translate(${margin.left},0)`)
                .call(d3.axisLeft(y));

            svg.selectAll('rect')
                .data(data)
                .join('rect')
                .attr('x', d => x(d.focus))
                .attr('y', d => y(d.count))
                .attr('width', x.bandwidth())
                .attr('height', d => y(0) - y(d.count))
                .attr('fill', '#f59e0b');
        }

        function createOutcomesChart() {
            const data = [
                { type: 'Economic Only', count: 12 },
                { type: 'Environmental Only', count: 2 },
                { type: 'Both', count: 8 }
            ];

            const width = 800;
            const height = 400;
            const margin = { top: 20, right: 30, bottom: 60, left: 60 };

            const svg = d3.select('#outcomes-chart')
                .append('svg')
                .attr('width', '100%')
                .attr('height', height)
                .attr('viewBox', `0 0 ${width} ${height}`);

            const x = d3.scaleBand()
                .domain(data.map(d => d.type))
                .range([margin.left, width - margin.right])
                .padding(0.3);

            const y = d3.scaleLinear()
                .domain([0, d3.max(data, d => d.count)])
                .nice()
                .range([height - margin.bottom, margin.top]);

            svg.append('g')
                .attr('transform', `translate(0,${height - margin.bottom})`)
                .call(d3.axisBottom(x));

            svg.append('g')
                .attr('transform', `translate(${margin.left},0)`)
                .call(d3.axisLeft(y));

            svg.selectAll('rect')
                .data(data)
                .join('rect')
                .attr('x', d => x(d.type))
                .attr('y', d => y(d.count))
                .attr('width', x.bandwidth())
                .attr('height', d => y(0) - y(d.count))
                .attr('fill', '#8b5cf6');
        }

        function createFactorsChart() {
            const data = [
                { category: 'Technical/Training', type: 'Success', count: 20 },
                { category: 'Funding/Resources', type: 'Barrier', count: 9 },
                { category: 'Partnerships', type: 'Success', count: 8 },
                { category: 'Coordination', type: 'Barrier', count: 7 },
                { category: 'Policy/Framework', type: 'Success', count: 7 },
                { category: 'Policy/Regulatory', type: 'Barrier', count: 4 }
            ];

            const width = 800;
            const height = 400;
            const margin = { top: 20, right: 30, bottom: 100, left: 60 };

            const svg = d3.select('#factors-chart')
                .append('svg')
                .attr('width', '100%')
                .attr('height', height)
                .attr('viewBox', `0 0 ${width} ${height}`);

            const x = d3.scaleBand()
                .domain(data.map(d => d.category))
                .range([margin.left, width - margin.right])
                .padding(0.2);

            const y = d3.scaleLinear()
                .domain([0, d3.max(data, d => d.count)])
                .nice()
                .range([height - margin.bottom, margin.top]);

            svg.append('g')
                .attr('transform', `translate(0,${height - margin.bottom})`)
                .call(d3.axisBottom(x))
                .selectAll('text')
                .attr('transform', 'rotate(-45)')
                .style('text-anchor', 'end');

            svg.append('g')
                .attr('transform', `translate(${margin.left},0)`)
                .call(d3.axisLeft(y));

            svg.selectAll('rect')
                .data(data)
                .join('rect')
                .attr('x', d => x(d.category))
                .attr('y', d => y(d.count))
                .attr('width', x.bandwidth())
                .attr('height', d => y(0) - y(d.count))
                .attr('fill', d => d.type === 'Success' ? '#10b981' : '#ef4444');

            // Legend
            const legend = svg.append('g')
                .attr('transform', `translate(${width - 150}, ${margin.top})`);

            legend.append('rect')
                .attr('width', 15)
                .attr('height', 15)
                .attr('fill', '#10b981');
            
            legend.append('text')
                .attr('x', 20)
                .attr('y', 12)
                .text('Success Factors')
                .style('font-size', '12px');

            legend.append('rect')
                .attr('y', 20)
                .attr('width', 15)
                .attr('height', 15)
                .attr('fill', '#ef4444');
            
            legend.append('text')
                .attr('x', 20)
                .attr('y', 32)
                .text('Barriers')
                .style('font-size', '12px');
        }

        // Initialize
        loadStudies();
    </script>
</body>
</html>
